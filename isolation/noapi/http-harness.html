"<body>\n  <pre id=output></pre>\n<script>\n  dump._last = +new Date();\n  if(typeof output==='undefined') output = document.getElementById('output');\n\tdump('tsc.js...');\n\tfunction dump(txt) {\n    var now =+new Date();\n\n    var dt = document.createElement('span');\n    dt.style.opacity = 0.5; dt.style.minWidth = '6em'; dt.style.display = 'inline-block';\n    if (dump._last)\n    \tdt.textContent = now - dump._last;\n    output.appendChild(dt);\n\n    var more = document.createElement('span');\n    more.textContent = txt;\n    output.appendChild(more);\n\n    var br = document.createElement('br');\n    output.appendChild(br);\n\n    dump._last = now;\n    console.log(txt);\n  }\n</script>\n<script type=text/static id=tsc.js src=\"../../node_modules/typescript/lib/tsc.js\"></script>\n<script> dump(' OK.'); </script>\n<script type=text/static id=http.ts src=\"http.ts\"></script>\n<script type=text/static id=events.ts src=\"events.ts\"></script>\n<script type=text/static id=Buffer.ts src=\"Buffer.ts\"></script>\n\n<script>\n\ndump('compile...');\nwindow.onerror = function() {\n  var dumpError = '';\n  for (var i = 0; i < arguments.length; i++) {\n    if (dumpError) dumpError += ' ';\n    dumpError += arguments[i];\n  }\n  dump(dumpError);\n};\n\nvar httpJS = compileTS(\n  {\n    'http.ts': document.getElementById('http.ts').innerHTML,\n    'events.ts': document.getElementById('events.ts').innerHTML,\n    'Buffer.ts': document.getElementById('Buffer.ts').innerHTML\n  },\n  'http.ts','events.ts','Buffer.ts', '--out', 'http.js', '--inlineSourceMap', '--inlineSources');\n\ndump('eval...');\ntry {\n\teval(httpJS['http.js']);\n}\ncatch (evalError) {\n  dump('EVAL ERROR '+evalError+'\\n'+(evalError.stack||''));\n}\n\ntry {\n  var http = createHTTP(true /*https*/);\n}\ncatch (createError) {\n  dump('createHTTP ERROR '+createError+'\\n'+(createError.stack||''));\n}\n\ndump('http.get...');\n\nvar req = http.request({\n  host:'unpkg.com',\n  method: 'GET',\n  path: '/codemirror@5.31.0/CHANGELOG.md'\n});\n\nreq.end();\n\nvar body = '';\n\nreq.on('response',function(res) {\n  dump('response: '+res);\n\n  res.on('data', function(dt) {\n    dump('>'+dt);\n  });\n\n  res.on('end', function() {\n    dump('END');\n  });\n\n  res.on('error', function() {\n    dump('ERROR');\n  });\n\n});\n\nreq.on('error', function() {\n  dump('req-ERROR');\n});\n\n\nfunction compileTS(dir/*, args*/){\n  function readDirectory(dirPath, extension, exclude) {\n    var result = [];\n    var expExclude = [], excludeMap = {};\n    for (var i = 0; exclude && i < exclude.length; i++) {\n      excludeMap[expExclude[i] = path.resolve(dir, exclude[i])] = true;\n    }\n\n    for (var f in dir) if (dir.hasOwnProperty(f)) {\n      if (dirPath) {\n        if (f.indexOf(dir)!==0)\n          continue;\n      }\n\n      if (!excludeMap[f]) {\n        if (!extension || f.slice(-extension.length)===extension) result.push(f);\n      }\n    }\n\n    return result;\n  }\n\n  var tscPath = 'typescript/lib/tsc.js';\n  var tscScript = '(function(){ return function (ChakraHost) { '+document.getElementById('tsc.js').innerHTML+'\\n}})() //# '+'sourceURL='+tscPath+'@wrapped';\n\n  var result = {files:[]};\n\n  var chakraHost = {\n    newLine: '\\n',\n    args: [],\n    useCaseSensitiveFileNames: true,\n    echo: function(text) {\n      console.log(text);\n    },\n    readFile: function (path, encoding) { return dir[path]; },\n    writeFile: function (file, data, writeByteOrderMark) {\n      //console.log('writeFile(',file,',',data.length);\n      result[file] = data;\n      result.files.push({file:file, data:data});\n    },\n    resolvePath: function(file) { return file; },\n    fileExists: function(file) { return !!dir[file]; },\n    directoryExists: function(file) { return true; },\n    createDirectory: function() { },\n    executingFile: tscPath,\n    currentDirectory: '/',\n    readDirectory: readDirectory,\n    getDirectories: readDirectory,\n    quit: function() { }\n  };\n\n  for (var i = 1; i < arguments.length; i++) {\n    chakraHost.args.push(arguments[i]);\n  }\n\n  var tsc = eval(tscScript);\n  tsc(chakraHost);\n\n  return result;\n}\n\n\n</script>\n</body>"